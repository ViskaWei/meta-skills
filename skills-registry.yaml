version: "4.0.0"
description: "FDPS v4 — Flat-Domain Progressive Skill (Public Core)"
author: "Viska Wei"
created: "2026-02-24"
updated: "2026-02-27"

# === Capability Catalog ===
# All 29 capabilities live in a single flat catalog (replaces v3 stages: section)
catalog_file: "_resolver/capability-catalog.yaml"

# === Naming Convention (v4) ===
naming_convention:
  layer_a: "cap-<verb>-<object>"
  layer_b: "path-<domain>-<outcome>"
  layer_c: "run-<path-id>-<context>-<yyyymmdd>-<seq>"
  policies: "rule-<scope>-<intent>"

verb_governance: "_resolver/verbs.yaml"
object_governance: "_resolver/objects.yaml"

controlled_verbs:
  - intake
  - extract
  - map
  - compare
  - decide
  - plan
  - scaffold
  - build
  - render
  - assemble
  - check
  - package
  - publish
  - track
  - triage
  - review
  - capture
  - sync

# === Domain Tools ===
tools:
  - id: skill
    title: "Skill Management"
    path: "_tools/skill/"
    used_by: ["knowledge"]
    capabilities: [skill-creation, skill-init]

  - id: router
    title: "Smart Router"
    path: "_tools/router/"
    used_by: ["workflow"]
    capabilities: [intent-routing, path-selection]

# === Policies ===
policies:
  - id: rule-quality-deliverable-minimum
    file: "_policies/rule-quality-deliverable-minimum.yaml"
    triggers: ["*"]
  - id: rule-improve-verify-result
    file: "_policies/rule-improve-verify-result.yaml"
    triggers: [improvement-log]
  - id: rule-capability-gap-detection
    file: "_policies/rule-capability-gap-detection.yaml"
    triggers: ["*"]
    scope: governance
  - id: rule-skill-build-gate
    file: "_policies/rule-skill-build-gate.yaml"
    triggers: [skill-artifact]
    scope: governance
  - id: rule-completion-guard
    file: "_policies/rule-completion-guard.yaml"
    triggers: ["*"]
    scope: cross-cutting
  - id: rule-entropy-cleanup-gate
    file: "_policies/rule-entropy-cleanup-gate.yaml"
    triggers: [entropy-report]
    scope: governance
  - id: rule-skill-health-gate
    file: "_policies/rule-skill-health-gate.yaml"
    triggers: [health-dashboard]
    scope: governance
  - id: rule-layer-dependency
    file: "_policies/rule-layer-dependency.yaml"
    triggers: ["*"]
    scope: governance
  - id: rule-research-front-loading
    file: "_policies/rule-research-front-loading.yaml"
    triggers: [experiment-report, hub-update, experiment-retro, knowledge-card]
    scope: research
  - id: rule-path-execution-guard
    file: "_policies/rule-path-execution-guard.yaml"
    triggers: ["*"]
    scope: cross-cutting

# === Path Templates ===
paths:
  - id: path-general-skill-health
    file: "_paths/path-general-skill-health.yaml"
    domain: general
  - id: path-general-skill-quality
    file: "_paths/path-general-skill-quality.yaml"
    domain: general
  - id: path-general-entropy-cleanup
    file: "_paths/path-general-entropy-cleanup.yaml"
    domain: general
  - id: path-general-capability-gap
    file: "_paths/path-general-capability-gap.yaml"
    domain: general
  - id: path-research-new-experiment
    file: "_paths/path-research-new-experiment.yaml"
    domain: research
  - id: path-research-hypothesis-to-evidence
    file: "_paths/path-research-hypothesis-to-evidence.yaml"
    domain: research
  # path-general-ratchet-loop and path-general-improve-loop moved to private overlay

# === L0 Commands ===
# User-facing task commands (operate on user artifacts, not the skill system)
l0_commands:
  - id: build
    triggers: [build, 做, create, scaffold]
    skill_path: "skills/build/SKILL.md"
    candidate_paths: []
    default_rules: [rule-quality-deliverable-minimum]
  - id: research
    triggers: [research, 科研, experiment, hypothesis, rq]
    skill_path: "skills/research/SKILL.md"
    candidate_paths:
      - path-research-new-experiment
      - path-research-hypothesis-to-evidence
    default_rules: [rule-quality-deliverable-minimum, rule-research-front-loading, rule-completion-guard]

# === System Commands ===
# Commands that operate on the skill system itself, not user artifacts.
# Internal routing via SKILL.md table — NOT the smart-router.
system_commands:
  - id: meta
    triggers: [meta, harness, skill health, skill check, skill create, skill quality, skill cleanup, skill gaps, grow, catalog]
    internal_routing: true
    internal_paths:
      - path-general-skill-health
      - path-general-skill-quality
      - path-general-entropy-cleanup
      - path-general-capability-gap
    default_rules: [rule-completion-guard, rule-quality-deliverable-minimum, rule-improve-verify-result]
    skill_path: "skills/meta/SKILL.md"
